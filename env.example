# ============================================================================
# Polymarket Elite Trading System (PETS) - Environment Variables
# ============================================================================
#
# CRITICAL: Never commit the actual .env file with real values!
# This is a template. Copy to .env and fill with your actual values.
#
# Usage:
#   cp .env.example .env
#   nano .env  # Edit with your values
#
# ============================================================================

# ============================================================================
# Polymarket API Configuration
# ============================================================================

# Polymarket API credentials (get from https://polymarket.com/settings/api)
POLYMARKET_API_KEY=your_polymarket_api_key_here
POLYMARKET_API_SECRET=your_polymarket_api_secret_here

# Polymarket WebSocket URL
POLYMARKET_WS_URL=wss://ws-subscriptions-clob.polymarket.com/ws/market

# Polymarket REST API URLs
POLYMARKET_CLOB_API_URL=https://clob.polymarket.com
POLYMARKET_GAMMA_API_URL=https://gamma-api.polymarket.com

# ============================================================================
# Wallet Configuration
# ============================================================================

# CRITICAL: Your Polygon wallet private key (NEVER share this!)
# This wallet should be funded with USDC on Polygon
POLYMARKET_WALLET_PRIVATE_KEY=0xyour_private_key_here

# Wallet address (derived from private key, for verification)
POLYMARKET_WALLET_ADDRESS=0xyour_wallet_address_here

# ============================================================================
# Blockchain Configuration
# ============================================================================

# Polygon RPC URL (get free tier from Alchemy or Infura)
# Alchemy: https://dashboard.alchemy.com/ (300M requests/month free)
# Infura: https://infura.io/ (100K requests/day free)
POLYGON_RPC_URL=https://polygon-mainnet.g.alchemy.com/v2/YOUR_ALCHEMY_KEY

# Polygon Chain ID (137 for mainnet, 80001 for Mumbai testnet)
POLYGON_CHAIN_ID=137

# Gas price multiplier (1.0 = standard, 1.5 = faster, 2.0 = fastest)
GAS_PRICE_MULTIPLIER=1.2

# ============================================================================
# Database Configuration
# ============================================================================

# PostgreSQL / TimescaleDB
DB_HOST=timescaledb
DB_PORT=5432
DB_NAME=pets
DB_USER=pets_user
DB_PASSWORD=your_secure_database_password_here

# Database connection pool
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

# TimescaleDB hypertable chunk interval (default: 7 days)
TIMESCALEDB_CHUNK_INTERVAL=7 days

# ============================================================================
# Redis Configuration
# ============================================================================

# Redis connection
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=  # Leave empty if no password
REDIS_DB=0

# Redis cache TTL (seconds)
REDIS_CACHE_TTL=30

# Redis Pub/Sub channels
REDIS_CHANNEL_ORDERBOOK=orderbook
REDIS_CHANNEL_TRADES=trades
REDIS_CHANNEL_BOT_EVENTS=bot_events

# ============================================================================
# Capital Allocation
# ============================================================================

# Total capital allocated to trading (USD)
TOTAL_CAPITAL_USD=50000

# Emergency reserve (% of total capital, not allocated to bots)
EMERGENCY_RESERVE_PERCENTAGE=10

# ============================================================================
# Risk Management
# ============================================================================

# Global risk limits
MAX_DRAWDOWN_INDIVIDUAL=0.25        # 25% max drawdown per bot
MAX_DRAWDOWN_PORTFOLIO=0.40         # 40% max total portfolio drawdown
MAX_CAPITAL_PER_STRATEGY=0.05       # 5% max per strategy
MAX_CAPITAL_PER_BOT=0.20            # 20% max per bot
MAX_CATEGORY_EXPOSURE=0.60          # 60% max in one category (crypto/politics/sports)

# Circuit breakers
CIRCUIT_BREAKER_CONSECUTIVE_LOSSES=3
CIRCUIT_BREAKER_DAILY_LOSS=0.05     # 5% daily loss triggers halt
CIRCUIT_BREAKER_COOLDOWN_HOURS=24

# Position sizing
KELLY_FRACTION=0.5                  # Half Kelly (safer than Full Kelly)
MIN_POSITION_SIZE_USD=10
MAX_POSITION_SIZE_USD=5000

# ============================================================================
# External APIs (Optional but Recommended)
# ============================================================================

# News APIs (for Bot 4: News Scalping)
# NewsAPI: https://newsapi.org/ (free: 100 requests/day)
NEWSAPI_KEY=your_newsapi_key_here

# Twitter/X API (for sentiment analysis)
# Get from: https://developer.twitter.com/
TWITTER_API_KEY=your_twitter_api_key_here
TWITTER_API_SECRET=your_twitter_api_secret_here
TWITTER_BEARER_TOKEN=your_twitter_bearer_token_here

# Esports APIs (for Bot 2: Esports Parsing)
# Riot Games API: https://developer.riotgames.com/ (free tier available)
RIOT_GAMES_API_KEY=your_riot_api_key_here

# Abios Esports API: https://abiosgaming.com/api (free tier: 100 requests/day)
ABIOS_API_KEY=your_abios_api_key_here
ABIOS_API_SECRET=your_abios_api_secret_here

# PandaScore API: https://pandascore.co/ (free tier: 1000 requests/hour)
PANDASCORE_API_KEY=your_pandascore_api_key_here

# ============================================================================
# Monitoring & Alerting
# ============================================================================

# Grafana
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=your_secure_grafana_password_here

# Prometheus
PROMETHEUS_RETENTION_TIME=30d
PROMETHEUS_SCRAPE_INTERVAL=15s

# Telegram Bot (for alerts)
# Create bot: https://t.me/BotFather
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
TELEGRAM_CHAT_ID=your_telegram_chat_id_here

# Discord Webhook (for alerts)
# Create webhook: Server Settings > Integrations > Webhooks
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR_WEBHOOK_URL

# ============================================================================
# Logging Configuration
# ============================================================================

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Log format (json or text)
LOG_FORMAT=json

# Log rotation
LOG_MAX_BYTES=10485760    # 10MB
LOG_BACKUP_COUNT=5

# ============================================================================
# API Server Configuration
# ============================================================================

# Internal API
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4

# API authentication
API_KEY=your_secure_api_key_here
API_SECRET=your_secure_api_secret_here

# CORS (for dashboard)
API_CORS_ORIGINS=http://localhost:8501,http://dashboard:8501

# ============================================================================
# Dashboard Configuration
# ============================================================================

# Streamlit dashboard
DASHBOARD_PORT=8501
DASHBOARD_THEME=dark

# Dashboard update intervals (seconds)
DASHBOARD_METRICS_UPDATE_INTERVAL=1
DASHBOARD_CHARTS_UPDATE_INTERVAL=5
DASHBOARD_POSITIONS_UPDATE_INTERVAL=2

# ============================================================================
# Bot-Specific Configuration
# ============================================================================

# Bot 1: Market Rebalancing Arbitrage
BOT_01_ENABLED=true
BOT_01_CAPITAL_ALLOCATION=0.12      # 12%
BOT_01_SCAN_INTERVAL_SECONDS=30

# Bot 2: Esports & Live Events Parsing
BOT_02_ENABLED=true
BOT_02_CAPITAL_ALLOCATION=0.14      # 14%

# Bot 3: Copy Trading
BOT_03_ENABLED=true
BOT_03_CAPITAL_ALLOCATION=0.06      # 6%
BOT_03_COPY_RATIO=0.2               # Copy 20% of whale positions

# Bot 4: News Scalping
BOT_04_ENABLED=true
BOT_04_CAPITAL_ALLOCATION=0.14      # 14%
BOT_04_NEWS_SOURCES=newsapi,rss     # Comma-separated

# Bot 5: Market Making
BOT_05_ENABLED=true
BOT_05_CAPITAL_ALLOCATION=0.20      # 20%
BOT_05_REBALANCE_INTERVAL_MINUTES=15

# Bot 6: Multi-Outcome Arbitrage
BOT_06_ENABLED=true
BOT_06_CAPITAL_ALLOCATION=0.10      # 10%

# Bot 7: AI Contrarian + Attention
BOT_07_ENABLED=true
BOT_07_CAPITAL_ALLOCATION=0.08      # 8%

# Bot 8: Tail Risk + MM Combo
BOT_08_ENABLED=true
BOT_08_CAPITAL_ALLOCATION=0.14      # 14%
BOT_08_MAX_TAIL_POSITIONS=50

# Bot 9: Kelly Value Betting
BOT_09_ENABLED=true
BOT_09_CAPITAL_ALLOCATION=0.12      # 12%
BOT_09_MIN_EDGE=0.05                # 5% minimum edge required

# Bot 10: Long-term Value
BOT_10_ENABLED=true
BOT_10_CAPITAL_ALLOCATION=0.10      # 10%

# ============================================================================
# Testing & Development
# ============================================================================

# Environment mode (development, testing, production)
ENVIRONMENT=development

# Paper trading mode (true = no real capital)
PAPER_TRADING_MODE=true

# Mock external APIs (true = use mock data, faster development)
MOCK_EXTERNAL_APIS=false

# Enable debug features
DEBUG_ENABLED=true
DEBUG_SAVE_ORDERBOOKS=false         # Save orderbook snapshots for analysis

# ============================================================================
# Performance Tuning
# ============================================================================

# WebSocket connection settings
WS_RECONNECT_DELAY_SECONDS=5
WS_MAX_RECONNECT_ATTEMPTS=10
WS_PING_INTERVAL_SECONDS=30

# API rate limiting
API_RATE_LIMIT_BURST=3500           # Polymarket CLOB: 3,500/10s burst
API_RATE_LIMIT_SUSTAINED=60         # Polymarket CLOB: 60/s sustained

# Order execution settings
ORDER_EXECUTION_TIMEOUT_SECONDS=10
ORDER_MAX_RETRIES=3
ORDER_RETRY_DELAY_SECONDS=2

# Latency targets (milliseconds)
TARGET_LATENCY_MS=100
WARNING_LATENCY_MS=200
CRITICAL_LATENCY_MS=500

# ============================================================================
# Backup & Recovery
# ============================================================================

# Automatic database backups
AUTO_BACKUP_ENABLED=true
AUTO_BACKUP_INTERVAL_HOURS=6
AUTO_BACKUP_RETENTION_DAYS=30

# Backup destination
BACKUP_PATH=/app/data/backups

# ============================================================================
# Security
# ============================================================================

# JWT secret for API authentication
JWT_SECRET=your_secure_jwt_secret_here_minimum_32_characters
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# Rate limiting
RATE_LIMIT_PER_MINUTE=60

# Enable/disable features
ENABLE_API_DOCS=true                # Disable in production
ENABLE_PROMETHEUS_METRICS=true
ENABLE_HEALTH_ENDPOINTS=true

# ============================================================================
# Timezone
# ============================================================================

# System timezone (use UTC for consistency)
TZ=UTC

# ============================================================================
# Docker Configuration
# ============================================================================

# Docker Compose project name
COMPOSE_PROJECT_NAME=pets

# Restart policy (no, always, on-failure, unless-stopped)
RESTART_POLICY=unless-stopped

# ============================================================================
# Notes
# ============================================================================
#
# Required Variables (Must be set):
# - POLYMARKET_API_KEY
# - POLYMARKET_API_SECRET
# - POLYMARKET_WALLET_PRIVATE_KEY
# - DB_PASSWORD
# - GRAFANA_ADMIN_PASSWORD
# - API_KEY
# - JWT_SECRET
#
# Recommended Variables:
# - POLYGON_RPC_URL (use Alchemy or Infura for better reliability)
# - TELEGRAM_BOT_TOKEN (for critical alerts)
#
# Optional Variables:
# - All external API keys (bots will work with limited functionality)
#
# ============================================================================
